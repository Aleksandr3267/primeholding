import{i as f,k as j,w as p,x as _,j as a,C as N,m as v,B as y}from"./index-d83cef06.js";import{c as g,a as C}from"./index.esm-f7a4d6c0.js";const S=g().shape({reason:C().required("Поле обязательно для заполнения")});function k({setUpdateStatus:n}){const o=f(),c=j(p),{handleSubmit:r,control:m,formState:d,setError:i,setValue:E,reset:u}=_(),{errors:t}=d,h=async e=>{try{await S.validate(e,{abortEarly:!1});const l={apartment:c,reason:e.reason};o(y(l)).unwrap().then(s=>{s&&(s!=null&&s.apartment)&&(u(),x(),b())})}catch(l){l.inner.forEach(s=>{i(s.path,{type:"manual",message:s.message})})}},x=()=>{const e=document.getElementById("close-cancel-form-btn");e&&e.click()},b=()=>{n("4")};return a.jsx(a.Fragment,{children:a.jsx("div",{className:"modal fade modal-for-admin",id:"formCancellation",tabIndex:-1,"aria-labelledby":"formCancellation","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsx("div",{className:"modal-content",children:a.jsxs("div",{className:"modal-body modal-call__body",children:[a.jsxs("form",{className:"modal-call__form",onSubmit:r(h),children:[a.jsx("h4",{className:"modal-call__title",children:"Отмена"}),a.jsx("div",{className:"modal-for-admin__forms",children:a.jsxs("div",{className:"modal-call__side",children:[a.jsxs("div",{className:"modal-call__side-panel",children:[a.jsx("p",{className:"modal-for-admin__title-side",children:"Причина отмены*"}),a.jsxs("div",{className:"form-item",children:[a.jsx(N,{name:"reason",control:m,defaultValue:"",render:({field:e})=>a.jsx("textarea",{placeholder:"Причина отмены",...e})}),t.reason&&a.jsx("p",{children:t.reason.message})]}),a.jsx("p",{className:"text-accept-manager",children:"Требуется подтверждение от руководителя"})]}),a.jsxs("div",{className:"modal-admin__controls",children:[a.jsx("button",{type:"submit",className:"form__btn-submit link-brown",children:"Сохранить"}),a.jsx("button",{type:"button",className:"form__btn-undoing","data-bs-dismiss":"modal","aria-label":"Закрыть",children:"Отмена"})]})]})})]}),a.jsx("button",{type:"button",id:"close-cancel-form-btn",className:"modal-call__btn-close","data-bs-dismiss":"modal","aria-label":"Закрыть",value:"Send",children:a.jsx("img",{src:v,alt:"Закрыть"})})]})})})})})}export{k as default};
