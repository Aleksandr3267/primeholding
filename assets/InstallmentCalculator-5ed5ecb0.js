import{r as o,j as t,m as w,_ as b}from"./index-db146408.js";import{i as I}from"./iconDownload-d1bdc221.js";function k({selectedOption:a,costOfApart:r}){const[s,p]=o.useState("com"),[e,c]=o.useState(2e4),[i,l]=o.useState(0),[n,m]=o.useState(1);function f(){const u=document.querySelector("#targetElement .modal-calculator__top-b .price-apart"),F=document.querySelector("#targetElement .modal-calculator__top-b .price-apart #priceInput"),_=e,d=document.createElement("div");d.textContent=_,u.appendChild(d),d.style.color="#9D8962",d.style.fontSize="clamp(30px, 5vw, 70px)",d.style.fontFamily="var(--second-font)",d.style.marginTop="16px",d.style.borderBottom="1px solid #9D8962",d.style.paddingBottom="10px",F.style.display="none";const N=document.getElementById("targetElement");b(()=>import("./html2canvas.esm-e0a7d97b.js"),[]).then(({default:v})=>{b(()=>import("./jspdf.es.min-44454a7c.js"),["assets/jspdf.es.min-44454a7c.js","assets/index-db146408.js","assets/index-4b31b6d2.css"]).then(({default:D})=>{const y=new D("p","px","a4");v(N).then(j=>{const E=j.toDataURL("image/png"),C=y.internal.pageSize.getWidth(),$=j.height*C/j.width;y.addImage(E,"PNG",0,0,C,$),y.save("apartments.pdf"),u.removeChild(d),F.style.display="inline-block"})})})}const h=()=>((e-e*(i/100))/n).toFixed(0);function g(u){p(u)}const x=u=>{switch(u){case"":return{needFlat:"flat-1-1"};case"option1-1":return{needFlat:"flat-1-1"};case"option1-2":return{needFlat:"flat-1-4"};case"option1-3":return{needFlat:"flat-1-5"};case"option1-4":return{needFlat:"flat-1-3"};case"option1-5":return{needFlat:"flat-1-2"};case"option2-1":return{needFlat:"flat-2-1"};case"option2-2":return{needFlat:"flat-2-2"};case"option2-3":return{needFlat:"flat-2-3"};case"option2-4":return{needFlat:"flat-2-4"};case"option2-5":return{needFlat:"flat-2-5"};case"option2-6":return{needFlat:"flat-2-6"};case"option2-14-1":return{needFlat:"flat-2-14-1"};case"option2-14-2":return{needFlat:"flat-2-14-2"};case"option3-1":return{needFlat:"flat-3-1"};case"option3-2":return{needFlat:"flat-3-2"};case"option3-3":return{needFlat:"flat-3-3"};case"option3-4":return{needFlat:"flat-3-4"};case"option3-5":return{needFlat:"flat-3-5"};case"option4-1":return{needFlat:"flat-4-1"};case"option4-2":return{needFlat:"flat-4-2"};case"option4-3":return{needFlat:"flat-4-3"};case"option4-4":return{needFlat:"flat-4-4"};case"option4-5":return{needFlat:"flat-4-5"};case"option4-6":return{needFlat:"flat-4-6"};case"option4-7":return{needFlat:"flat-4-7"};case"option4-14-1":return{needFlat:"flat-4-14-1"};case"option4-14-2":return{needFlat:"flat-4-14-2"};case"option4-14-3":return{needFlat:"flat-4-14-3"};case"option4-14-4":return{needFlat:"flat-4-14-4"};case"option4-14-5":return{needFlat:"flat-4-14-5"};default:return""}},{needFlat:S}=x(a);return t.jsx("div",{className:"modal fade modal-calculator",id:"installmentCalculator",tabIndex:-1,"aria-labelledby":"installmentCalculator","aria-hidden":"true",children:t.jsx("div",{className:"modal-dialog modal-lg",id:"targetElement",children:t.jsx("div",{className:"modal-content",children:t.jsxs("div",{className:"modal-body modal-calculator__body",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"modal-calculator__top",children:[t.jsxs("div",{className:"currency-selection",children:[t.jsx("div",{className:`currency-b ${s==="dollar"?"active":""}`,"data-currency":"dollar",onClick:()=>g("dollar"),children:"$"}),t.jsx("div",{className:`currency-b ${s==="com"?"active":""}`,"data-currency":"com",onClick:()=>g("com"),children:"C"})]}),t.jsx("button",{className:"call-btn",type:"button","data-bs-toggle":"modal","data-bs-target":"#callModalApartments",children:"Оставить заявку"})]}),t.jsx("div",{className:"modal-calculator__top-b",children:t.jsx(P,{value:e,setApartmentCost:c,costOfApart:r,needFlat:S,currency:s})}),t.jsxs("div",{className:"modal-calculator__center",children:[t.jsx(M,{value:i,onChange:l,apartmentCost:e}),t.jsx(A,{value:n,onChange:m})]}),t.jsxs("div",{className:"modal-calculator__bottom",children:[t.jsx(B,{cost:h(),currency:s}),t.jsxs("button",{className:"download-mob",onClick:f,children:[t.jsx("img",{src:I,alt:"iconDownload"})," Скачать PDF"]})]})]}),t.jsx("button",{type:"button",className:"modal-call__btn-close","data-bs-dismiss":"modal","aria-label":"Закрыть",value:"Send",children:t.jsx("img",{src:w,alt:"Закрыть"})})]})})})})}function P({value:a,setApartmentCost:r,costOfApart:s,needFlat:p,currency:e}){var h;const[c,i]=o.useState((h=a==null?void 0:a.toString())==null?void 0:h.replace(/\B(?=(\d{3})+(?!\d))/g," ")),[l,n]=o.useState(2193100/89.7);function m(g){const x=g.target.value;n(x)}function f(){e==="dollar"&&n(Math.max(500,l)),e==="com"&&n(Math.max(44850,l))}return o.useEffect(()=>{r(l),i(l)},[l]),o.useEffect(()=>{e?(e==="dollar"&&n(Math.floor(l/89.7)),e==="com"&&n(Math.floor(l*89.7))):(r(e==="dollar"?Math.floor(2193100/89.7):e==="com"?2193100:""),i(e==="dollar"?Math.floor(2193100/89.7):e==="com"?2193100/1:""))},[e]),c.toLocaleString(),t.jsxs("div",{className:"price-apart",children:[t.jsx("label",{className:"title-calculator",htmlFor:"priceInput",children:"Стоимость квартиры"}),t.jsx("input",{min:1,type:"number",id:"priceInput",value:c,onChange:m,onBlur:f})]})}function M({value:a,onChange:r,apartmentCost:s}){const[p,e]=o.useState({}),c=n=>{const m=parseFloat(n.target.value);r(m)};o.useEffect(()=>{const n=`${a/100*100}%`,m="#9D8962",f="rgba(255, 255, 255, 0.212)",h={background:`linear-gradient(to right, ${m} 0%, ${m} ${n}, ${f} ${n}, ${f} 100%)`};e(h)},[a]);const l=(s*a/100).toLocaleString();return t.jsxs("div",{className:"row-calc",children:[t.jsx("label",{className:"title-calculator",htmlFor:"downPaymentSlider",children:"Первоначальный взнос %"}),t.jsx("p",{className:"param-calc",children:l}),t.jsx("input",{type:"range",id:"downPaymentSlider",min:0,max:100,step:1,value:a,onChange:c,style:p})]})}function A({value:a,onChange:r}){const[s,p]=o.useState({}),e=c=>{const i=parseInt(c.target.value);r(i)};return o.useEffect(()=>{const c=`${a/12*100}%`,i="#9D8962",l="rgba(255, 255, 255, 0.212)",n={background:`linear-gradient(to right, ${i} 0%, ${i} ${c}, ${l} ${c}, ${l} 100%)`};p(n)},[a]),t.jsxs("div",{className:"row-calc",children:[t.jsx("label",{className:"title-calculator",htmlFor:"durationSlider",children:"Срок мес."}),t.jsxs("p",{className:"param-calc",children:[" ",a]}),t.jsx("input",{type:"range",id:"durationSlider",min:1,max:12,step:1,value:a,onChange:e,style:s})]})}function B({cost:a,currency:r}){const s=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ");return t.jsxs("div",{children:[t.jsx("p",{className:"title-calculator",children:"Ежемесячный платеж "}),t.jsxs("p",{className:"price-month",children:[" ",t.jsx("strong",{className:"price",children:s})," ",t.jsxs("span",{children:[r==="dollar"?"$":r==="com"?"c":"","/МЕС."]})," "]})]})}export{k as default};
